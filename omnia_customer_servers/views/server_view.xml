<?xml version="1.0" encoding="UTF-8"?>
<odoo>
<data>

    <record model="ir.actions.act_window" id="server_menu_action">
    	<field name="name">Server Config</field>
        <field name="res_model">server.config</field>
        <field name="view_mode">tree,form</field>
    </record>
                       
    <record id="server_search_view" model="ir.ui.view">
    	<field name="name">server.search.view</field>
    	<field name="model">server.config</field>
    	<field name="arch" type="xml">
    		<search string="Customer search">
    			<field name="partner_id"/>
    			<group expand="0" name="group_by" string="Group By">
    				<filter name="partner_id" string="Customer" domain="[]" context="{'group_by' : 'partner_id'}"/>
    			</group>
    		</search>
    	</field>
    </record>
    
    <record model="ir.ui.view" id="server_tree_view">
            <field name="name">server.tree</field>
            <field name="model">server.config</field>
            <field name="arch" type="xml">
                <tree string="Server Tree">
                	<field name="partner_id"/>
                	<field name="ip_server"/>
                	<field name="user_login_odoo"/>
                	<field name="password_login_odoo"/>
                	<field name="db_name"/>
                	<field name="used_cad"/>
                	<field name="odoo_version"/>
                </tree>
            </field>
    </record>
            
    <record model="ir.ui.view" id="server_form_view">
            <field name="name">server.form</field>
            <field name="model">server.config</field>
            <field name="arch" type="xml">
                <form string="Server Form">
                	<sheet>
                    	<div class="oe_title">
                     		<h3>
                     			<group>
                            		<field name="partner_id"/>
                            	</group>
                        	</h3>
                    	</div>                    
     					<group>
                       		<group>
                          		<field name="ip_server"/>
								<field name="user_login_odoo"/>
                            	<field name="password_login_odoo"/>
                        	</group>
                        	<group>
	                        		<field name="db_name"/>
                            	<field name="odoo_version"/>
                        	</group>
                        	<group string="OpenVPN" colspan="4">
	                        	<group>
	                        		<field name="open_vpn_fname" select="1"/>
	                            	<field name="open_vpn" filename="open_vpn_fname"/>
	                            	<field name="open_vpn_login"/>
	            					<field name="open_vpn_password"/>
	                        	</group>
	                        </group>
                        	<group string="SSH" colspan="4">
	                        	<group>
	                        		<field name="ip_ssh"/>
	                        		<field name="user_ssh"/>
	                        		<field name="password_ssh"/>
	                        		<field name="comando_ssh"/>
	                        	</group>
	                        	<group>
	                        		<field name="ssh_key"/>
	                        		<field name="user_root_ssh"/>
	                        		<field name="password_root_ssh"/>
	                        	</group>
                        	</group>
                        	<group string="Client" colspan="4">
	                        	<group>
	                        		<field name="client_port"/>
	                        		<field name="client_protocol"/>
	                        		<field name="path_internal_network"/>
	                        	</group>
                        	</group>
                        	<group string="Server Config" colspan="4">
                        		<field name="path_share"/>
                        		<field name="path_backup"/>
                        		<field name="path_filestore"/>
                        		<field name="path_file_config"/>
                        		<field name="path_file_log"/>
                        		<field name="path_demon"/>
                        		<field name="path_addons"/>
                        	</group>
                        	<group>
                        		<field name="migration_code"/>
                        	</group>
                        	<group colspan="4">
                        		<field nolabel="1" name="used_cad"/>
                        	</group>
                        	<group></group>
                       		<label for="notes"></label>
                       		<field name="notes" nolabel="1" widget="html"/>
                    	</group>
           			</sheet>
                </form>
            </field>
    </record>
    
    <record id="view_partner_form" model="ir.ui.view">
    	<field name="name">res.partner.form</field>
    	<field name="model">res.partner</field>
    	<field name="inherit_id" ref="base.view_partner_form"/>
    	<field name="arch" type="xml">
    		<xpath expr="//page[3]" position='after'>
    			<page string='Server Config'  groups="omnia_customer_servers.server_config_security_admin">
    				<field name="server_tab"  context="{'default_partner_id': id}"/>
    			</page>
    		</xpath>
    	</field>
    </record>
              
	<menuitem id="server_menu" name="Server configuration" parent="contacts.menu_contacts"
              action="server_menu_action" groups="omnia_customer_servers.server_config_security_admin"/>
            
	</data>  
</odoo>
